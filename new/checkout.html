<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q-Store - Checkout</title>
    <link rel="icon" href="../logo.png" class="logo">
    <link rel="stylesheet" href="../style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&family=Poppins:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>

    <div class="container">
        <div class="navbar">
            <div class="logo">
                <a href="../index.html"><img src="../images/logo-large.jpg" width="125px"></a>
            </div>
            <nav>
                <ul>
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="product.html">Products</a></li>
                    <li><a href="About.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="Account.html">Account</a></li>
                </ul>
            </nav>
            <a href="cart.html"><img src="../images/cart.png" width="30px" height="30px"></a>
        </div>
    </div>

    <!-- Checkout Section -->
    <div class="small-container checkout-page">
        <h2 class="title">Checkout</h2>
        <div class="row">
            <div class="col-2">
                <h3>Billing Details</h3>
                <form id="checkout-form" onsubmit="placeOrder(event)">
                    <label>Full Name</label>
                    <input type="text" placeholder="John Doe" required>

                    <label>Email</label>
                    <input type="email" placeholder="john@example.com" required>

                    <label>Address</label>
                    <input type="text" placeholder="123 Street" required>

                    <label>City</label>
                    <input type="text" placeholder="New York" required>

                    <div class="flex-row">
                        <div class="half-width">
                            <label>State</label>
                            <input type="text" placeholder="NY" required>
                        </div>
                        <div class="half-width">
                            <label>Zip Code</label>
                            <input type="text" placeholder="10001" required>
                        </div>
                    </div>

                    <h3>Delivery Options</h3>
                    <select id="delivery-type" required>
                        <option value="standard">Standard Delivery (5-7 days) - Free</option>
                        <option value="express">Express Delivery (1-2 days) - $10</option>
                    </select>

                    <h3>Payment Method</h3>
                    <div class="payment-options">
                        <label><input type="radio" name="payment" value="card" checked> Credit/Debit Card</label>
                        <label><input type="radio" name="payment" value="paypal"> PayPal</label>
                        <label><input type="radio" name="payment" value="cod"> Cash on Delivery</label>
                    </div>

                    <button type="submit" class="btn">Place Order</button>
                </form>
            </div>

            <div class="col-2">
                <h3>Order Summary</h3>
                <div id="order-summary">
                    <!-- Cart items will be displayed here -->
                </div>
                <div class="total-price">
                    <table>
                        <tr>
                            <td>Total</td>
                            <td id="checkout-total">$0.00</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="../script.js"></script>
    <script>
        // Load Order Summary
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        let summaryContainer = document.getElementById("order-summary");
        let total = 0;

        if (cart.length === 0) {
            summaryContainer.innerHTML = "<p>Your cart is empty.</p>";
        } else {
            cart.forEach(item => {
                let itemTotal = item.price * (item.quantity || 1);
                total += itemTotal;
                summaryContainer.innerHTML += `
                    <div class="summary-item">
                        <img src="${item.image}" width="50">
                        <div>
                            <p>${item.name}</p>
                            <small>${item.quantity || 1} x $${item.price}</small>
                        </div>
                        <span>$${itemTotal}</span>
                    </div>
                `;
            });

            // Add tax and potential delivery fee logic here if needed
            let tax = Math.round(total * 0.05);
            let finalTotal = total + tax;
            document.getElementById("checkout-total").innerText = "$" + finalTotal;
        }

        function placeOrder(e) {
            e.preventDefault();
            alert("Thank you! Your order has been placed successfully.");
            localStorage.removeItem("cart"); // Clear cart
            window.location.href = "../index.html"; // Redirect to home
        }
    </script>
</body>

</html>